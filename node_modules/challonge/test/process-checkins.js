var challonge = require('./../');

var client = challonge.createClient({
	apiKey: require('./../key.js').challonge,
	format: 'json',
	version: 1,
});

var tourneyName = 'new_api_test' + Math.floor(Math.random()*10000);

client.tournaments.create({
	tournament: {
		name: 'name-'+tourneyName,
		url: tourneyName,
		signupCap: 8,
		tournamentType: 'single elimination',
		checkInDuration: '1',
		startAt: new Date(Date.now()+100000)
	},
	callback: function(err,data){
		if (err) { console.log(err); return; }
		console.log('created', data)
		setTimeout(function() {
			processCheckin();
		}, 12050);
	}
});

function processCheckin() {
	client.tournaments.processCheckIns({
		id: tourneyName,
		callback: function(err,data){
			if (err) { console.log(err); return; }
			console.log(data);
		}
	});
}
